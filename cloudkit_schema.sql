DEFINE SCHEMA

    RECORD TYPE Company (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        name                    STRING QUERYABLE SORTABLE,
        primaryContactInfo      STRING,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE Store (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        name                    STRING QUERYABLE SORTABLE,
        storeCode               STRING QUERYABLE,
        location                STRING,
        phone                   STRING,
        isActive                INT64 QUERYABLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE User (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        storeIds                LIST<STRING>,
        role                    STRING QUERYABLE,
        displayName             STRING SORTABLE,
        email                   STRING QUERYABLE SORTABLE,
        isActive                INT64 QUERYABLE,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        GRANT READ, WRITE TO "_creator"
    );

    RECORD TYPE Guest (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        primaryStoreId          STRING QUERYABLE,
        firstName               STRING QUERYABLE,
        lastName                STRING QUERYABLE SORTABLE,
        email                   STRING QUERYABLE,
        phone                   STRING,
        notes                   STRING,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE Quote (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        storeId                 STRING QUERYABLE,
        guestId                 STRING QUERYABLE,
        status                  STRING QUERYABLE,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        updatedAt               TIMESTAMP SORTABLE,
        validUntil              TIMESTAMP SORTABLE,
        currencyCode            STRING,
        subtotal                DOUBLE,
        tax                     DOUBLE,
        total                   DOUBLE,
        rushMultiplierApplied   DOUBLE,
        pricingVersion          STRING,
        internalNotes           STRING,
        customerFacingNotes     STRING,
        springersItem           INT64,
        salesSku                STRING,
        rushType                STRING,
        requestedDueDate        TIMESTAMP SORTABLE,
        promisedDueDate         TIMESTAMP SORTABLE,
        coordinatorApprovalRequired INT64,
        coordinatorApprovalGranted  INT64,
        intakeChecklistId       STRING,
        primaryServiceCategory  STRING QUERYABLE,
        priority                STRING QUERYABLE,
        estimateApproved        INT64,
        preApprovedLimit        DOUBLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE QuoteLineItem (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        quoteId                 STRING QUERYABLE,
        serviceTypeId           STRING QUERYABLE,
        sku                     STRING,
        description             STRING,
        metalType               STRING,
        metalWeightGrams        DOUBLE,
        laborMinutes            INT64,
        baseCost                DOUBLE,
        baseRetail              DOUBLE,
        calculatedRetail        DOUBLE,
        manualOverrideRetail    DOUBLE,
        overrideReason          STRING,
        isRush                  INT64,
        rushMultiplier          DOUBLE,
        finalRetail             DOUBLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE ServiceType (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        name                    STRING QUERYABLE SORTABLE,
        category                STRING QUERYABLE,
        defaultSku              STRING,
        defaultLaborMinutes     INT64,
        defaultMetalUsageGrams  DOUBLE,
        baseRetail              DOUBLE,
        baseCost                DOUBLE,
        pricingFormulaId        STRING,
        isActive                INT64 QUERYABLE,
        isGenericSku            INT64,
        requiresSpringersCheck  INT64,
        metalTypes              LIST<STRING>,
        sizingCategory          STRING,
        watchBrand              STRING,
        estimateRequired        INT64,
        vendorService           INT64,
        qualityControlRequired  INT64,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE PricingRule (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        name                    STRING QUERYABLE SORTABLE,
        description             STRING,
        formulaDefinition       STRING,
        allowManualOverride     INT64,
        requireManagerApprovalIfOverrideExceedsPercent DOUBLE,
        isActive                INT64 QUERYABLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE MetalMarketRate (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        metalType               STRING QUERYABLE,
        unit                    STRING,
        rate                    DOUBLE,
        effectiveDate           TIMESTAMP QUERYABLE SORTABLE,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        isActive                INT64 QUERYABLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE LaborRate (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        role                    STRING QUERYABLE,
        ratePerHour             DOUBLE,
        effectiveDate           TIMESTAMP QUERYABLE SORTABLE,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        isActive                INT64 QUERYABLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE QuotePhoto (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        quoteId                 STRING QUERYABLE,
        assetReference          ASSET,
        caption                 STRING,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE IntakeChecklist (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        quoteId                 STRING QUERYABLE,
        inspectorId             STRING QUERYABLE,
        inspectionDate          TIMESTAMP QUERYABLE SORTABLE,
        findings                STRING,
        overallCondition        STRING,
        safeToClean             INT64,
        isRush                  INT64,
        salespersonId           STRING,
        repairType              STRING,
        photosRequired          INT64,
        photosCaptured          INT64,
        shortDescription        STRING,
        extendedDescription     STRING,
        conditionNotes          STRING,
        estimateRequired        INT64,
        preApprovedLimit        DOUBLE,
        requiresApproval        INT64,
        shippingDepositTaken    INT64,
        shippingDepositAmount   DOUBLE,
        specialHandling         STRING,
        requestedDueDate        TIMESTAMP SORTABLE,
        promisedDueDate         TIMESTAMP SORTABLE,
        dueDateRealistic        INT64,
        springersItem           INT64,
        highValue               INT64,
        insuranceRequired       INT64,
        customerPresent         INT64,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE CommunicationLog (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        quoteId                 STRING QUERYABLE,
        guestId                 STRING QUERYABLE,
        userId                  STRING QUERYABLE,
        type                    STRING QUERYABLE,
        direction               STRING,
        purpose                 STRING,
        status                  STRING QUERYABLE,
        subject                 STRING,
        message                 STRING,
        clientFacingNotes       STRING,
        internalNotes           STRING,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        scheduledFor            TIMESTAMP,
        completedAt             TIMESTAMP,
        followUpRequired        INT64,
        followUpDate            TIMESTAMP,
        attachments             LIST<STRING>,
        relatedQuoteStatus      STRING,
        automatedMessage        INT64,
        templateUsed            STRING,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE CommunicationTemplate (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        name                    STRING QUERYABLE SORTABLE,
        type                    STRING QUERYABLE,
        purpose                 STRING QUERYABLE,
        subject                 STRING,
        body                    STRING,
        isActive                INT64 QUERYABLE,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE Vendor (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        name                    STRING QUERYABLE SORTABLE,
        businessName            STRING,
        contactPerson           STRING,
        phone                   STRING,
        email                   STRING QUERYABLE,
        address                 STRING,
        website                 STRING,
        serviceTypes            LIST<STRING>,
        specializations         LIST<STRING>,
        supportedBrands         LIST<STRING>,
        typicalTurnaroundDays   INT64,
        rushAvailable           INT64,
        rushTurnaroundDays      INT64,
        minimumOrder            DOUBLE,
        paymentTerms            STRING,
        shippingPolicy          STRING,
        qualityRating           DOUBLE,
        reliabilityRating       DOUBLE,
        communicationRating     DOUBLE,
        preferredVendor         INT64,
        isActive                INT64 QUERYABLE,
        notes                   STRING,
        lastUsedDate            TIMESTAMP,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE VendorWorkOrder (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        companyId               STRING QUERYABLE,
        vendorId                STRING QUERYABLE,
        quoteId                 STRING QUERYABLE,
        serviceTypeId           STRING,
        status                  STRING QUERYABLE,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        sentDate                TIMESTAMP,
        expectedCompletionDate  TIMESTAMP,
        completedDate           TIMESTAMP,
        cost                    DOUBLE,
        notes                   STRING,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE LooseDiamondDocumentation (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        quoteId                 STRING QUERYABLE,
        lineItemId              STRING,
        documentedBy            STRING QUERYABLE,
        documentedAt            TIMESTAMP QUERYABLE SORTABLE,
        shape                   STRING,
        caratWeight             DOUBLE,
        color                   STRING,
        clarity                 STRING,
        origin                  STRING,
        lengthMM                DOUBLE,
        widthMM                 DOUBLE,
        depthMM                 DOUBLE,
        tablePercentage         DOUBLE,
        depthPercentage         DOUBLE,
        laserInscription        STRING,
        certificationNumber     STRING,
        certificationLab        STRING,
        girdleDescription       STRING,
        fluorescence            STRING,
        estimatedValue          DOUBLE,
        replacementValue        DOUBLE,
        appraisalRequired       INT64,
        weightVerified          INT64,
        measurementsVerified    INT64,
        inscriptionVerified     INT64,
        verificationNotes       STRING,
        photoIds                LIST<STRING>,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE AppraisalService (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        quoteId                 STRING QUERYABLE,
        guestId                 STRING QUERYABLE,
        appraiserId             STRING QUERYABLE,
        appraisalType           STRING QUERYABLE,
        pricingTier             STRING,
        itemCount               INT64,
        largestCaratWeight      DOUBLE,
        calculatedFee           DOUBLE,
        finalFee                DOUBLE,
        feeOverrideReason       STRING,
        createdAt               TIMESTAMP QUERYABLE SORTABLE,
        scheduledDate           TIMESTAMP,
        completedDate           TIMESTAMP,
        expedited               INT64,
        expediteMultiplier      DOUBLE,
        sarinReportRequested    INT64,
        gemIdRequested          INT64,
        photoDocumentation      INT64,
        certificationVerification INT64,
        isUpdate                INT64,
        originalAppraisalDate   TIMESTAMP,
        updateDiscount          DOUBLE,
        status                  STRING QUERYABLE,
        deliveryMethod          STRING,
        notes                   STRING,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );

    RECORD TYPE StatusChangeLog (
        "___createTime"         TIMESTAMP,
        "___createdBy"          REFERENCE,
        "___etag"               STRING,
        "___modTime"            TIMESTAMP,
        "___modifiedBy"         REFERENCE,
        "___recordID"           REFERENCE,
        entityType              STRING QUERYABLE,
        entityId                STRING QUERYABLE,
        fromStatus              STRING,
        toStatus                STRING QUERYABLE,
        changedBy               STRING QUERYABLE,
        changedAt               TIMESTAMP QUERYABLE SORTABLE,
        reason                  STRING,
        GRANT WRITE TO "_creator",
        GRANT READ TO "_world"
    );
